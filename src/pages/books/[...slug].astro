---
import type { GetStaticPaths } from "astro";
import { getCollection } from 'astro:content';
import Layout from '../../layouts/BookLayout.astro';
import { SideNav } from '../../components/sidenav';

export const getStaticPaths = (async () => {
  const allBooks = await getCollection('books');
  return allBooks.map((book) => {
    return {
      params: {
        slug: book.slug
      },
      props: { book }
    }
  });
}) satisfies GetStaticPaths;

// console.log(slug);

const { book } = Astro.props;
// const {getHeadings} = book;
const {Content, headings} = await book.render();

// const headings = await getHeadings();
console.log(headings);

---

<Layout title={book.data.title} author={book.data.author }>
  <SideNav headings={headings} client:load />
  <div class="book">
    <Content />
  </div>
</Layout>


